<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xml:lang="en"
lang="en"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<title>Microsoft Power BI Data Analyst Certification Companion: Preparation for Exam PL-300</title>
<link rel="stylesheet" type="text/css" href="../override_v1.css"/>
<link rel="stylesheet" type="text/css" href="../css/springer_epub.css"/>
</head>
<body>
<div id="book-content">
<div id="sbo-rt-content"><div epub:type="chapter" role="doc-chapter"><div class="ChapterContextInformation"><div class="ContextInformation" id="b978-1-4842-9013-2_8"><div class="ChapterCopyright">© The Author(s), under exclusive license to APress Media, LLC, part of Springer Nature 2023</div><span class="ContextInformationAuthorEditorNames">J. Jolly</span><span class="ContextInformationBookTitles"><span class="BookTitle">Microsoft Power BI Data Analyst Certification Companion</span></span><span class="ContextInformationSeries"><span class="SeriesTitle" lang="en">Certification Study Companion Series</span></span><span class="ChapterDOI"><a href="https://doi.org/10.1007/978-1-4842-9013-2_8">https://doi.org/10.1007/978-1-4842-9013-2_8</a></span></div></div><!--Begin Abstract--><div class="MainTitleSection"><h1 class="ChapterTitle" lang="en">8. Optimize Model Performance</h1></div><div class="AuthorGroup"><div class="AuthorNames"><span class="Author"><span class="AuthorName">Jessica Jolly</span><sup><a href="#Aff11">1</a> <span class="ContactIcon"> </span></sup></span></div><div class="Affiliations"><div class="Affiliation" id="Aff11"><span class="AffiliationNumber">(1)</span><div class="AffiliationText">Evanston, IL, USA</div></div><div class="ClearBoth"> </div></div></div><!--End Abstract--><div class="Fulltext"><p class="Para" id="Par2">When you first start writing DAX, you are bound to write some “ugly baby” DAX—DAX only an author can love! And that is okay—at the beginning. There’s an expression “Perfect is the enemy of done,” which means don’t let the quest for perfect DAX get in the way of writing DAX. Good DAX takes practice and some tools, one of which is built into the Power BI Desktop.</p><section class="Section1 RenderAsSection1" id="Sec1"><h2 class="Heading">Measuring Report Performance</h2><div class="Para" id="Par3">The first concept to grasp is that every visual creates a DAX expression. Even if you never write a line of DAX, your report is still using it. Any DAX that you write (for measures or tables or calculated columns) is another layer that can affect your report’s performance. To see the DAX, navigate to the <span class="EmphasisFontCategoryNonProportional ">View</span> tab, and then choose the <span id="ITerm1"><span class="EmphasisFontCategoryNonProportional ">Performance analyzer</span></span>, as shown in Figure <span class="InternalRef"><a href="#Fig1">8-1</a></span>.<figure class="Figure" id="Fig1"><div class="MediaObject" id="MO1"><img alt="" aria-describedby="d64e343" src="../images/532800_1_En_8_Chapter/532800_1_En_8_Fig1_HTML.png" style="width:42.85em" width="1714" height="220"/><div class="TextObject" id="d64e343"><p class="Para" id="Par12">A PowerPoint presentation's menu bar where the performance analyzer icon can be opened by selecting the view tab.</p></div></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-1</span><p class="SimplePara">On the View tab, click Performance analyzer</p></div></figcaption></figure></div><div class="Para" id="Par4">The <span class="EmphasisFontCategoryNonProportional ">Performance analyzer</span> will open. To use the <span class="EmphasisFontCategoryNonProportional ">Performance analyzer</span>, click <span class="EmphasisFontCategoryNonProportional ">Start recording</span>, as shown in Figure <span class="InternalRef"><a href="#Fig2">8-2</a></span>.<figure class="Figure" id="Fig2"><div class="MediaObject" id="MO2"><img alt="" aria-describedby="d64e369" src="../images/532800_1_En_8_Chapter/532800_1_En_8_Fig2_HTML.jpg" style="width:25.1em" width="1004" height="754"/><div class="TextObject" id="d64e369"><p class="Para" id="Par13">A tab for performance analysis with an arrow that points to a start recording option.</p></div></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-2</span><p class="SimplePara">The Performance analyzer will record your selections</p></div></figcaption></figure></div><div class="Para" id="Par5">Once you have started <span id="ITerm2">recording</span>, begin interacting with your report page. In the following example, I sorted the <span class="EmphasisFontCategoryNonProportional ">CompanyName</span> column as shown in Figure <span class="InternalRef"><a href="#Fig3">8-3</a></span>.<figure class="Figure" id="Fig3"><div class="MediaObject" id="MO3"><img alt="" aria-describedby="d64e398" src="../images/532800_1_En_8_Chapter/532800_1_En_8_Fig3_HTML.png" style="width:42.85em" width="1714" height="673"/><div class="TextObject" id="d64e398"><p class="Para" id="Par14">A table with data on the company name, average order value, total order value, and largest line value. Adjacent to it is the performance analyzer tab with DAX query data.</p></div></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-3</span><p class="SimplePara">Note the four entries under the name Table</p></div></figcaption></figure></div></section>
<section class="Section1 RenderAsSection1" id="Sec2"><h2 class="Heading">Examining DAX Query Performance</h2><div class="Para" id="Par6">Earlier, I said that each visual constitutes a DAX <span id="ITerm3">query</span>. To see that DAX query, on the <span class="EmphasisFontCategoryNonProportional ">Performance analyzer</span> window, select <span class="EmphasisFontCategoryNonProportional ">Copy query</span> and then paste the query into a text editor or DAX Studio (which we will cover in Chapter <span class="ExternalRef"><a href="532800_1_En_14_Chapter.xhtml"><span class="RefSource">14</span></a></span>). Here is the DAX query from the preceding example:<div class="ProgramCode" id="PC1"><div class="LineGroup"><div class="FixedLine">// DAX Query</div><div class="FixedLine">DEFINE</div><div class="FixedLine">  VAR __DS0Core =</div><div class="FixedLine">    SUMMARIZECOLUMNS(</div><div class="FixedLine">      ROLLUPADDISSUBTOTAL('Customers'[CompanyName], "IsGrandTotalRowTotal"),</div><div class="FixedLine">      "TotalOrderValue", 'DAX Measures'[TotalOrderValue],</div><div class="FixedLine">      "LargestLineValue", 'DAX Measures'[LargestLineValue],</div><div class="FixedLine">      "AverageOrderValue", 'DAX Measures'[AverageOrderValue]</div><div class="FixedLine">    )</div><div class="FixedLine">  VAR __DS0PrimaryWindowed =</div><div class="FixedLine">    TOPN(502, __DS0Core, [IsGrandTotalRowTotal], 0, 'Customers'[CompanyName], 1)</div><div class="FixedLine">EVALUATE</div><div class="FixedLine">  __DS0PrimaryWindowed</div><div class="FixedLine">ORDER BY</div><div class="FixedLine">  [IsGrandTotalRowTotal] DESC, 'Customers'[CompanyName]</div></div></div></div><div class="FormalPara FormalParaRenderingStyle1 ParaTypeImportant" id="FPar1"><div class="Heading">Tip</div><p class="Para FirstParaInFormalPara" id="Par7">A great way to start improving your DAX is to copy the queries from the visuals you create. You may not understand everything in the query, but you can start to get a “feel” for the syntax and logic of DAX.</p></div><p class="Para" id="Par8">Cumulatively, the number of separate DAX <span id="ITerm4">queries</span> on a page can slow page responsiveness. If this starts to happen, open the <span class="EmphasisFontCategoryNonProportional ">Performance analyzer</span> and interact with each visual in turn. Identify the slowest elements of the visual. If the DAX query component is slow, and if your visual uses measures or calculated columns, you can optimize those elements by rewriting the DAX. You <em class="EmphasisTypeItalic ">cannot</em> modify the DAX on which the visual is based.</p></section>
<section class="Section1 RenderAsSection1" id="Sec3"><h2 class="Heading">Checking Number of Visuals per Page</h2><div class="Para" id="Par9">There is no set number of visuals for a <span id="ITerm5">page</span>, but the rule of thumb is to aim for between five and seven visuals. Of course, it very much depends on the cumulative impact of everything that is on the page, which is why it can be useful to use the <span class="EmphasisFontCategoryNonProportional ">Performance analyzer</span> to see how long a page takes to refresh. To do so, first choose <span class="EmphasisFontCategoryNonProportional ">Clear</span> and then <span class="EmphasisFontCategoryNonProportional ">Refresh visuals</span>, as shown in Figure <span class="InternalRef"><a href="#Fig4">8-4</a></span>.<figure class="Figure" id="Fig4"><div class="MediaObject" id="MO4"><img alt="" aria-describedby="d64e517" src="../images/532800_1_En_8_Chapter/532800_1_En_8_Fig4_HTML.png" style="width:42.85em" width="1714" height="905"/><div class="TextObject" id="d64e517"><p class="Para" id="Par15">A DAX page of the customer profile for Franchi S dot p dot A with data for the number of products from each category. There is a performance analyzer with a report. adjacent to the DAX page.</p></div></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-4</span><p class="SimplePara">Refreshing a page to measure the overall <span id="ITerm6">responsiveness</span></p></div></figcaption></figure></div></section>
<section class="Section1 RenderAsSection1" id="Sec4"><h2 class="Heading">Considering Other Performance Factors</h2><div class="Para" id="Par10">Other factors that can affect your report’s <span id="ITerm7">performance</span><span id="ITerm8"></span>, with suggested remediation methods, are as follows:<div class="Table" id="Taba"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"/><col class="tcol2 align-left"/></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Source</p></th><th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Remediation</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Unnecessary (unused) columns</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Remove those columns in the Power Query Editor.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Columns with high cardinality</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Remove these columns in the Power Query Editor or reduce their cardinality by simplifying them. For example, if the column has both date and time, separate these into two columns, date and time.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Many-to-many relationships</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Build bridge tables between two tables that currently have a many-to-many relationship.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Bidirectional relationships</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Use DAX to reverse a relationship (e.g., build a measure using CROSSFILTER).</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Using nonoptimized DAX</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Many DAX functions can be replaced by one that is faster. Test various versions of a measure.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Calculated <span id="ITerm9">columns</span><span id="ITerm10"></span></p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Replace with a measure or add the column in the source or using the Power Query Editor.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Aggregate large tables</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Create aggregated tables in the Power Query Editor or in the source.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Filter and slicer selections</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Preset filter and slicer to the most commonly selected items. Close the Filters pane.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Excessive tooltips</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Tooltips generate a query. Avoid using too many fields in a tooltip. If a tooltip is unnecessary, disable tooltips for that visual on the <span class="EmphasisFontCategoryNonProportional ">Format visual</span> panel.</p></td></tr><tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">Reduce interactions</p></td><td style="text-align: left;"><p class="SimplePara">If a visual does not need to interact with other visuals, you can disable interactions on the <span class="EmphasisFontCategoryNonProportional ">Edit interactions</span> panel.</p></td></tr></tbody></table></div></div><p class="Para" id="Par11">As you can see, report performance is dependent on many factors, many of which should be addressed before creating the first visual.</p></section>
</div></div></div>
</div>
</body>
</html>